unit app1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ExtCtrls ,mmSystem, Vcl.StdCtrls;

type
  TFrMain = class(TForm)
    Sh1: TShape;
    Bt2: TButton;
    Timer1: TTimer;
    Target1: TShape;
    Target2: TShape;
    procedure FormMouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer);
    procedure FormKeyPress(Sender: TObject; var Key: Char);
    procedure FormKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
    procedure FormKeyUp(Sender: TObject; var Key: Word; Shift: TShiftState);
    procedure Bt2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FrMain: TFrMain;

implementation

{$R *.dfm}


procedure TFrMain.Bt2Click(Sender: TObject);
var
  myjoy:Tjoyinfo;
  b1, b2, b3, b4:Boolean;
begin
  joygetpos(joystickid1,@myjoy);
//  Label1.Caption:=IntToStr(myjoy.wypos);
//  Label2.Caption:=IntToStr(myjoy.wxpos);
//  TrackBar1.Position:=myjoy.wypos;
//  TrackBar2.Position:=myjoy.wxpos;

  b1:=(myjoy.wbuttons and joy_button1)>0;
  b2:=(myjoy.wbuttons and joy_button2)>0;
  b3:=(myjoy.wbuttons and joy_button3)>0;
  b4:=(myjoy.wbuttons and joy_button4)>0;

  if b1 then
   Sh1.Top:=Sh1.Top - 20
  else if b2 then
   Sh1.Left:=Sh1.Left + 20
  else if b3 then
   Sh1.Top:=Sh1.Top + 20
  else if b4 then
   Sh1.Left:=Sh1.Left - 20
end;

procedure TFrMain.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
    if Key = VK_F1 then
    FrMain.Color := clRed;

    if (Key = VK_F3) and (ssCtrl in Shift) then
    FrMain.Color := clYellow;

end;

procedure TFrMain.FormKeyUp(Sender: TObject; var Key: Word; Shift: TShiftState);
begin
   if Key = VK_F2 then
   FrMain.Color := clGreen;
end;

// movement Sh1
procedure TFrMain.FormKeyPress(Sender: TObject; var Key: Char);
begin
  if Key = 'a' then
    Sh1.Left := Sh1.Left - 10
  else if Key = 'd' then
    Sh1.Left := Sh1.Left + 10
  else if Key = 'w' then
    Sh1.Top := Sh1.Top - 10
  else if Key = 's' then
    Sh1.Top := Sh1.Top + 10;
end;



procedure TFrMain.FormMouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
begin
  //(String Concatenation) show the position x,y on form discription;
  FrMain.Caption := 'X: ' + IntToStr(X) + '  Y: ' + IntToStr(Y);
end;

end.
